# 表1数据模板与首批看板字段设计

## 一、你的表1结构识别结果

- 工作表：`Sheet1`
- 数据规模：`19351` 行，`15` 列
- 关键维度：`时间`、`是否小微`、`行程区划码`、`省份`、`地市`
- 关键指标：
  - 全量商户数、全量主体数
  - 近6个月活跃商户数、近6个月活跃主体数
  - 当月交易金额(分)、当月交易笔数
  - 当月新增账户数、当月新增主体数
  - 当月活跃账户数、当月活跃主体数

## 二、DataHub标准模板（长表）

### CSV 模板

路径：`templates/datahub/table1_template.csv`

字段：
- `event_time`：统一时间（建议每月首日 `YYYY-MM-01 00:00:00`）
- `entity_id`：实体键（建议 `行程区划码|是否小微`）
- `metric`：指标英文编码
- `value`：指标值（数值）
- `payload`：JSON扩展信息（省份/地市/中文指标名/单位）

### JSONL 模板

路径：`templates/datahub/table1_template.jsonl`

字段语义与 CSV 一致。

## 三、表1一键转换命令

```bash
make datahub-table1 xlsx='/Users/luis/Desktop/表1.xlsx'
```

转换输出：
- `私有数据/import/table1_events.csv`
- `私有数据/import/table1_events.jsonl`

再执行：

```bash
make datahub-cycle
```

即可进入 DataHub 的清洗、建模、分析流程。

## 四、首批看板字段设计（推荐）

### 1) 经营规模看板

- `merchant_total_count`（全量商户数）
- `subject_total_count`（全量主体数）
- 维度：`月份`、`省份`、`地市`、`是否小微`

### 2) 活跃度看板

- `merchant_active_6m_count`
- `subject_active_6m_count`
- `active_account_count`
- `active_subject_count`
- 派生指标：
  - `6个月商户活跃率 = merchant_active_6m_count / merchant_total_count`
  - `当月账户活跃率 = active_account_count / merchant_total_count`

### 3) 交易质量看板

- `merchant_txn_amount_cent`
- `merchant_txn_count`
- 派生指标：
  - `客单价(分) = merchant_txn_amount_cent / merchant_txn_count`
  - `单商户月均交易额(分) = merchant_txn_amount_cent / merchant_total_count`

### 4) 增长看板

- `new_account_count`
- `new_subject_count`
- 派生指标：
  - `账户新增率 = new_account_count / merchant_total_count`
  - `主体新增率 = new_subject_count / subject_total_count`

### 5) 结构对比看板

- `小微 vs 非小微` 指标对比（规模、活跃、交易、新增）
- 区域排名 TopN（地市/省份）

## 五、下一步（多表接入建议）

后续你给第2、第3张表时，沿用相同范式：
1. 先定义维度主键（`entity_id` 规则）
2. 统一指标编码（`metric`）
3. 保留中文原始字段到 `payload`
4. 统一导入 DataHub 的长表格式

这样多表可以直接在 Gold 层汇总到同一经营看板。
