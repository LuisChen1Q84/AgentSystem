# 自动迭代触发

**版本**: v1.0
**说明**: 任务完成后自动执行八步迭代流程，系统会自己进化

## 触发条件

### 自动触发

- 完成架构级改动
- 学习了新的方法论
- 解决了复杂问题
- 每周日（定期迭代）

### 手动触发

- 用户说"执行迭代"
- 用户说"/iterate"
- 用户说"系统迭代"

## 八步迭代流程

### 1. 观察（Observe）

**执行内容**：
- 回顾本次任务的完整过程
- 梳理关键决策点
- 记录执行路径

**产出**：清晰的事件时间线

### 2. 分析（Analyze）

**执行内容**：
- 什么做得好？为什么？
- 什么可以改进？为什么？
- 发现了什么新模式？

**产出**：分析结论列表

### 3. 设计（Design）

**执行内容**：
- 针对问题设计解决方案
- 针对模式设计抽象方法

**产出**：改进方案文档

### 4. 实施（Implement）

**执行内容**：
- 更新系统文件
- 创建新的知识文档

**产出**：实际的文件改动

### 5. 验证（Validate）

**执行内容**：
- 检查文件完整性
- 验证逻辑一致性

**产出**：验证报告

### 6. 记录（Record）

**执行内容**：
- 更新对话历史
- 创建情景记忆

**产出**：完整的记录文档

### 7. 提炼（Distill）

**执行内容**：
- 创建/更新语义记忆
- 总结方法论

**产出**：语义记忆文档

### 8. 提交（Commit）

**执行内容**：
```bash
git add .
git commit -m "iteration: [本次迭代主题]"
```

**产出**：Git commit

## 质量检查（对抗式纠错）

在验证步骤执行：

### 检查项

- 自我检查：回顾所有改动，检查是否符合强制规则
- 逻辑检查：验证改进方案是否有遗漏或矛盾
- 质量评分：给出 1-10 分的自我评分

### 评分标准

| 分数 | 评价 | 行动 |
|------|------|------|
| 9-10分 | 完美执行 | 直接提交 |
| 7-8分 | 良好执行 | 可以提交 |
| 5-6分 | 基本完成 | 需要改进 |
| 3-4分 | 勉强完成 | 重新设计 |
| 1-2分 | 执行失败 | 必须重做 |

### 反思改进

如果评分低于7分：
1. 返回第3步重新设计
2. 重复验证流程
3. 直到评分达到7分

## 迭代触发示例

### 示例1：架构级改动

**场景**：用户添加了一个新技能

**执行**：
1. 观察：用户通过什么方式添加技能
2. 分析：添加流程是否顺畅
3. 设计：优化技能添加流程
4. 实施：更新CLAUDE.md
5. 验证：检查逻辑一致性
6. 记录：创建情景记忆
7. 提炼：更新技能管理方法论
8. 提交：git commit

### 示例2：定期迭代（每周日）

**执行**：
1. 回顾本周所有会话
2. 分析本周发现的问题
3. 设计改进方案
4. 实施系统优化
5. 验证改动
6. 记录本周迭代
7. 提炼新方法论
8. 提交

## 输出格式

迭代完成后输出：

```
=== 系统迭代完成 ===

📊 质量评分：X/10

📝 改进内容：
- 改进点1
- 改进点2

📁 修改文件：
- 文件1.md
- 文件2.md

🔖 Git提交：iteration: [主题]

✓ 系统已自动优化
```

## 强制规则

- 迭代**必须**走完八步，不能跳过
- 评分低于7分**必须**重新设计
- 每次迭代**必须**提交Git
- 迭代记录**必须**保存到情景记忆
